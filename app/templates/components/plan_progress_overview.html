<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
  <div class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm">
    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Plan Progress</p>
    <div class="mt-3 space-y-3">
      {% with label="Plan progress", percent=plan.progress.percent, value=plan.progress.percent ~ '%', size='lg' %}
        {% include "components/progress_bar.html" %}
      {% endwith %}
      <p class="text-xs text-slate-500">
        {{ plan.progress.approved_subtasks }} of {{ plan.progress.total_subtasks }} subtasks approved.
      </p>
    </div>
  </div>
  <div class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm">
    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Days Complete</p>
    <div class="mt-3 space-y-3">
      {% set day_caption = 'No days scheduled yet.' if plan.progress.total_days == 0 else plan.progress.completed_days ~ ' of ' ~ plan.progress.total_days ~ ' days unlocked.' %}
      {% with label="Days complete", current=plan.progress.completed_days, target=plan.progress.total_days, percent=plan.progress.day_percent, unit='days', caption=day_caption %}
        {% include "components/progress_bar.html" %}
      {% endwith %}
    </div>
  </div>
  <div class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm">
    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Subtasks Approved</p>
    <div class="mt-3 space-y-3">
      {% set subtask_caption = 'Waiting for first approval.' if plan.progress.total_subtasks == 0 else plan.progress.approved_subtasks ~ ' of ' ~ plan.progress.total_subtasks ~ ' tasks complete.' %}
      {% with label="Approved subtasks", current=plan.progress.approved_subtasks, target=plan.progress.total_subtasks, percent=plan.progress.percent, unit='tasks', caption=subtask_caption %}
        {% include "components/progress_bar.html" %}
      {% endwith %}
    </div>
  </div>
  <div class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm">
    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Total XP</p>
    <p class="mt-4 text-3xl font-bold text-slate-900">{{ plan.total_xp }}</p>
    <p class="mt-2 text-xs text-slate-500">XP awarded across all approved subtasks.</p>
  </div>
</div>
